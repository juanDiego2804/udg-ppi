<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SIIAU</title>
    <!-- Latest compiled and minified CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
<h1>Registrar estudiantes</h1>

<form action="/action_page.php">

    <label for="name" class="form-label">Name:</label>
    <input type="text" class="form-control" id="name" placeholder="Enter name" name="name">

    <label for="code" class="form-label">Code:</label>
    <input type="text" class="form-control" id="code" placeholder="Enter code" name="code">

    <div class="mb-3 mt-3">
        <label for="email" class="form-label">Email:</label>
        <input type="email" class="form-control" id="email" placeholder="Enter email" name="email">
    </div>

    <label for="degree" class="form-label">Degree:</label>
    <input type="text" class="form-control" id="degree" placeholder="Enter degree" name="degree">

    <label for="score" class="form-label">Score:</label>
    <input type="text" class="form-control" id="score" placeholder="Enter score" name="score">

    <div class="mb-3">
        <label for="pwd" class="form-label">Password:</label>
        <input type="password" class="form-control" id="pwd" placeholder="Enter password" name="pswd">
    </div>

    <div class="form-check mb-3">
        <label class="form-check-label">
            <input class="form-check-input" type="checkbox" name="remember"> Remember me
        </label>
    </div>
    <button type="submit" class="btn btn-primary" onclick="">Submit</button>
</form>

<script>

    function clearScreen(){
        document.getElementById("studentName").value = "";
        document.getElementById("studentCode").value = "";
        document.getElementById("studentEmail").value = "";
        document.getElementById("studentDegree").value = "";
        document.getElementById("studentScore").value = "";
    }
    function studentRegister(){
        const formStudentName = document.getElementById("studentName").value;

        const formStudentCode = document.getElementById("studentCode").value;

        const formStudentEmail = document.getElementById("studentEmail").value;

        const formStudentDegree = document.getElementById("studentDegree").value;

        const formStudentScore = document.getElementById("studentScore").value;

        console.log("formStudentName value: ", formStudentName);

        const url = "http://localhost:8080/students"

        //crear el objeto
        const studentObject = {
            code: formStudentCode,
            name: formStudentName,
            email: formStudentEmail,
            degree: formStudentDegree,
            score: formStudentScore
        };

        const requestOptions = {
            method : 'POST',
            headers : {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(studentObject)
    };

        //make the POST request
        fetch(url, requestOptions)
            .then(response => {
                if (!response.ok){
                    throw new Error('HTTP error! Status: '+response.status);

                }
                console.log(response.json());

            })
            .catch(error =>{
                console.error('Error: ',error);
            })


    }
</script>
</body>
</html>